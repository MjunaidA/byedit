{% comment %}
  Renders facets (filtering and sorting)

  Accepts:
  - results: {Object} Collection or Search object
  - enable_filtering: {Boolean} Show filtering when true
  - enable_sorting: {Boolean} Show sorting when true
  - filter_type: {String} Type of filter
  - paginate: {Object}

  Usage:
  {% render 'facets', results: collection, enable_filtering: true, enable_sorting: true, filter_type: 'vertical', paginate: paginate %}
{% endcomment %}

{{ 'component-show-more.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign sort_by = results.sort_by | default: results.default_sort_by
  assign total_active_values = 0
  if results.url
    assign results_url = results.url
  else
    assign terms = results.terms | escape
    assign results_url = '?q=' | append: terms | append: '&options%5Bprefix%5D=last&sort_by=' | append: sort_by
  endif
-%}

<div class="cstmContainerFacet facets-container{% if filter_type == 'drawer' %} facets-container-drawer{% endif %}">
  {%- if filter_type == 'vertical' or filter_type == 'horizontal' -%}
    <facet-filters-form class="facets small-hide">
      <form
        id="FacetFiltersForm"
        class="{% if filter_type == 'horizontal' %}facets__form{% else %}facets__form-vertical{% endif %}"
      >
        {%- if results.terms -%}
          <input type="hidden" name="q" value="{{ results.terms | escape }}">
          <input name="options[prefix]" type="hidden" value="last">
        {%- endif -%}

        {% if enable_filtering %}
          {% comment %} Heading is the first tabbable element on filter type horizontal {% endcomment %}
          <div
            id="FacetsWrapperDesktop"
            {% if filter_type == 'horizontal' %}
              class="facets__wrapper"
            {% endif %}
          >
            {%- if filter_type == 'horizontal' and results.filters != empty -%}
              <h2 class="facets__heading caption-large text-body" id="verticalTitle" tabindex="-1">
                {{ 'products.facets.filter_by_label' | t }}
              </h2>
            {%- endif -%}
            {% comment %} Pills are right below the title for filter type vertical {% endcomment %}
            {%- if filter_type == 'vertical' -%}
              <div class="active-facets active-facets-desktop">
                <div class="active-facets-vertical-filter">
                  {%- unless results.filters == empty -%}
                    <h2
                      class="facets__heading facets__heading--vertical caption-large text-body"
                      id="verticalTitle"
                      tabindex="-1"
                    >
                      {{ 'products.facets.filter_by_label' | t }}
                    </h2>
                  {%- endunless -%}
                  <facet-remove class="active-facets__button-wrapper">
                    <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
                      <span>{{ 'products.facets.clear_all' | t }}</span>
                    </a>
                  </facet-remove>
                </div>
                {%- for filter in results.filters -%}
                  {%- for value in filter.active_values -%}
                    <facet-remove class="toCountFilters">
                      <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
                        <span class="active-facets__button-inner button button--tertiary">
                          {{ filter.label }}: {{ value.label | escape }}
                          {% render 'icon-close-small' %}
                          <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
                        </span>
                      </a>
                    </facet-remove>
                  {%- endfor -%}
                  {% if filter.type == 'price_range' %}
                    {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                      <facet-remove class="toCountFilters">
                        <a href="{{ filter.url_to_remove }}" class="active-facets__button active-facets__button--light">
                          <span class="active-facets__button-inner button button--tertiary">
                            {%- if filter.min_value.value -%}
                              {{ filter.min_value.value | money }}
                            {%- else -%}
                              {{ 0 | money }}
                            {%- endif -%}
                            -
                            {%- if filter.max_value.value -%}
                              {{ filter.max_value.value | money }}
                            {%- else -%}
                              {{ filter.range_max | money }}
                            {%- endif -%}
                            {% render 'icon-close-small' %}
                            <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
                          </span>
                        </a>
                      </facet-remove>
                    {%- endif -%}
                  {% endif %}
                {%- endfor -%}
              </div>
            {%- endif -%}

            {% comment %} <script src="{{ 'show-more.js' | asset_url }}" defer="defer"></script> {% endcomment %}
            {% comment %} Filters for both horizontal and vertical filter {% endcomment %}
            {%- for filter in results.filters -%}
              {%- assign total_active_values = total_active_values | plus: filter.active_values.size -%}
              {% case filter.type %}
                {% when 'boolean', 'list' %}
                  <details
                    id="Details-{{ forloop.index }}-{{ section.id }}"
                    class="{% if filter_type == 'horizontal' %}disclosure-has-popup facets__disclosure{% else %} facets__disclosure-vertical{% endif %} js-filter"
                    data-index="{{ forloop.index }}"
                    {% if forloop.index == 1 or forloop.index == 2 or forloop.index == 3 %}
                      open
                    {% endif %}
                  >
                    <summary
                      class="cstm-facets facets__summary caption-large focus-offset"
                      aria-label="{{ filter.label }}  ({{ 'products.facets.filters_selected.one' | t: count: filter.active_values.size }})"
                    >
                      <div>
                        <span>
                          {{- filter.label | escape }}
                          {%- if filter_type == 'vertical' -%}
                            <span class="facets__selected no-js-hidden{% if filter.active_values.size == 0 %} hidden{% endif %}">
                              ({{ filter.active_values.size }})</span
                            >
                          {%- endif -%}
                        </span>
                    
                        <div class="iconMinus">
                         <svg xmlns="http://www.w3.org/2000/svg" width="16" height="2" viewBox="0 0 16 2" fill="none">
                        <path d="M15.3438 1.13062C15.3438 1.25494 15.2944 1.37416 15.2065 1.46207C15.1185 1.54998 14.9993 1.59937 14.875 1.59937H1.125C1.00068 1.59937 0.881451 1.54998 0.793544 1.46207C0.705636 1.37416 0.65625 1.25494 0.65625 1.13062C0.65625 1.00629 0.705636 0.887067 0.793544 0.799159C0.881451 0.711251 1.00068 0.661865 1.125 0.661865H14.875C14.9993 0.661865 15.1185 0.711251 15.2065 0.799159C15.2944 0.887067 15.3438 1.00629 15.3438 1.13062Z" fill="black"/>
                        </svg>
                        </div>
                        <div class="iconPlus">
                         <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                          <path d="M15.3438 7.99976C15.3438 8.12408 15.2944 8.2433 15.2065 8.33121C15.1185 8.41912 14.9993 8.46851 14.875 8.46851H8.46875V14.8748C8.46875 14.9991 8.41936 15.1183 8.33146 15.2062C8.24355 15.2941 8.12432 15.3435 8 15.3435C7.87568 15.3435 7.75645 15.2941 7.66854 15.2062C7.58064 15.1183 7.53125 14.9991 7.53125 14.8748V8.46851H1.125C1.00068 8.46851 0.881451 8.41912 0.793544 8.33121C0.705636 8.2433 0.65625 8.12408 0.65625 7.99976C0.65625 7.87544 0.705636 7.75621 0.793544 7.6683C0.881451 7.58039 1.00068 7.53101 1.125 7.53101H7.53125V1.12476C7.53125 1.00044 7.58064 0.881207 7.66854 0.793299C7.75645 0.705392 7.87568 0.656006 8 0.656006C8.12432 0.656006 8.24355 0.705392 8.33146 0.793299C8.41936 0.881207 8.46875 1.00044 8.46875 1.12476V7.53101H14.875C14.9993 7.53101 15.1185 7.58039 15.2065 7.6683C15.2944 7.75621 15.3438 7.87544 15.3438 7.99976Z" fill="black"/>
                          </svg>
                        </div>
                        
                      </div>
                    </summary>
                    <div
                      id="Facet-{{ forloop.index }}-{{ section.id }}"
                      class="parent-display {% if filter_type == 'horizontal' %}facets__display{% else %}facets__display-vertical{% endif %}"
                    >
                      {%- if filter_type != 'vertical' -%}
                        <div class="facets__header">
                          <span class="facets__selected no-js-hidden">
                            {{- 'products.facets.filters_selected' | t: count: filter.active_values.size -}}
                          </span>
                          <facet-remove>
                            <a href="{{ filter.url_to_remove }}" class="facets__reset link underlined-link">
                              {{ 'products.facets.reset' | t }}
                            </a>
                          </facet-remove>
                        </div>
                      {%- endif -%}
                      <fieldset class="facets-wrap parent-wrap {% if filter_type == 'vertical' %} facets-wrap-vertical{% endif %}">
                        <legend class="visually-hidden">{{ filter.label | escape }}</legend>
                        {% assign filterHandle = filter.label | handle  %}
                        <ul
                          class="{{ filter.label | escape }}-Ul {% if filter_type != 'vertical' %} facets__list{% endif %} list-unstyled no-js-hidden"
                          role="list"
                        >
                          {%- for value in filter.values -%}
                              {% if filterHandle contains 'gender' or filterHandle contains 'Gender' %}
                                  {% if value.label == 'Men' or value.label == 'Women' %}
                                    <li class="{% if filterHandle contains 'color' or filterHandle contains 'colour' %}colorCstmLi{% endif %} list-menu__item facets__item">
                                    <label
                                      for="Filter-{{ filter.param_name | escape }}-{{ forloop.index }}"
                                      class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                                    >
                                      <input
                                        {% if filterHandle contains 'color' or filterHandle contains 'colour' %}
                                        style="background-color:{{ value.value | handle }};background-image:url({{ value.value | handle | append: '.png' | file_url }});"
                                        class="colorCstmFilterInput";
                                        {% endif %}
                                        type="checkbox"
                                        name="{{ value.param_name }}"
                                        value="{{ value.value }}"
                                        id="Filter-{{ filter.param_name | escape }}-{{ forloop.index }}"
                                        {% if value.active %}
                                          checked
                                        {% endif %}
                                        {% if value.count == 0 and value.active == false %}
                                          disabled
                                        {% endif %}
                                      >
      
                                      {% comment %} <svg
                                        width="1.6rem"
                                        height="1.6rem"
                                        viewBox="0 0 16 16"
                                        aria-hidden="true"
                                        focusable="false"
                                        class="svgChecked"
                                      >
                                        <rect width="16" height="16" stroke="currentColor" fill="none" stroke-width="1"></rect>
                                      </svg> {% endcomment %}
      
                                      <svg class="svgChecked" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                      <rect x="1.16675" y="1.44043" width="15.6667" height="15.6667" rx="1.5" stroke="black" stroke-opacity="0.5"/>
                                      </svg>
      
                                      <svg
                                        aria-hidden="true"
                                        class="icon icon-checkmark svgChecked2"
                                        width="1.1rem"
                                        height="0.7rem"
                                        viewBox="0 0 11 7"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                      >
                                        <path d="M1.5 3.5L2.83333 4.75L4.16667 6L9.5 1"
                                          stroke="currentColor"
                                          stroke-width="1.75"
                                          stroke-linecap="round"
                                          stroke-linejoin="round" />
                                      </svg>
      
                                      <span aria-hidden="true">{{ value.label | escape }} {% comment %}({{ value.count }}){% endcomment %}</span> 
                                      <span class="visually-hidden">
                                        {{- value.label | escape }} (
                                        {%- if value.count == 1 -%}
                                          {{- 'products.facets.product_count_simple.one' | t: count: value.count -}}
                                        {%- else -%}
                                          {{- 'products.facets.product_count_simple.other' | t: count: value.count -}}
                                        {%- endif -%}
                                        )</span
                                      >
                                    </label>
                                  </li>
                                  {% endif %}
                              {% else %}
                              <li class="{% if filterHandle contains 'color' or filterHandle contains 'colour' %}colorCstmLi{% endif %} list-menu__item facets__item">
                              <label
                                for="Filter-{{ filter.param_name | escape }}-{{ forloop.index }}"
                                class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                              >
                                <input
                                  {% if filterHandle contains 'color' or filterHandle contains 'colour' %}
                                  style="background-color:{{ value.value | handle }};background-image:url({{ value.value | handle | append: '.png' | file_url }});"
                                  class="colorCstmFilterInput";
                                  {% endif %}
                                  type="checkbox"
                                  name="{{ value.param_name }}"
                                  value="{{ value.value }}"
                                  id="Filter-{{ filter.param_name | escape }}-{{ forloop.index }}"
                                  {% if value.active %}
                                    checked
                                  {% endif %}
                                  {% if value.count == 0 and value.active == false %}
                                    disabled
                                  {% endif %}
                                >

                                {% comment %} <svg
                                  width="1.6rem"
                                  height="1.6rem"
                                  viewBox="0 0 16 16"
                                  aria-hidden="true"
                                  focusable="false"
                                  class="svgChecked"
                                >
                                  <rect width="16" height="16" stroke="currentColor" fill="none" stroke-width="1"></rect>
                                </svg> {% endcomment %}

                                <svg class="svgChecked" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                <rect x="1.16675" y="1.44043" width="15.6667" height="15.6667" rx="1.5" stroke="black" stroke-opacity="0.5"/>
                                </svg>

                                <svg
                                  aria-hidden="true"
                                  class="icon icon-checkmark svgChecked2"
                                  width="1.1rem"
                                  height="0.7rem"
                                  viewBox="0 0 11 7"
                                  fill="none"
                                  xmlns="http://www.w3.org/2000/svg"
                                >
                                  <path d="M1.5 3.5L2.83333 4.75L4.16667 6L9.5 1"
                                    stroke="currentColor"
                                    stroke-width="1.75"
                                    stroke-linecap="round"
                                    stroke-linejoin="round" />
                                </svg>

                                <span aria-hidden="true">{{ value.label | escape }} {% comment %}({{ value.count }}){% endcomment %}</span> 
                                <span class="visually-hidden">
                                  {{- value.label | escape }} (
                                  {%- if value.count == 1 -%}
                                    {{- 'products.facets.product_count_simple.one' | t: count: value.count -}}
                                  {%- else -%}
                                    {{- 'products.facets.product_count_simple.other' | t: count: value.count -}}
                                  {%- endif -%}
                                  )</span
                                >
                              </label>
                            </li>
                            {% endif %}
                          {%- endfor -%}
                        </ul>
                        {% comment %} No show more for no JS {% endcomment %}
                        <ul
                          class="{% if filter_type != 'vertical' %} facets__list{% endif %} no-js-list list-unstyled no-js"
                          role="list"
                        >
                          {%- for value in filter.values -%}
                            <li class="list-menu__item facets__item">
                              <label
                                for="Filter-{{ filter.param_name | escape }}-{{ forloop.index }}-no-js"
                                class="facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}"
                              >
                                <input
                                  type="checkbox"
                                  name="{{ value.param_name }}"
                                  value="{{ value.value }}"
                                  id="Filter-{{ filter.param_name | escape }}-{{ forloop.index }}-no-js"
                                  {% if value.active %}
                                    checked
                                  {% endif %}
                                  {% if value.count == 0 and value.active == false %}
                                    disabled
                                  {% endif %}
                                >

                                {% comment %} <svg
                                  width="1.6rem"
                                  height="1.6rem"
                                  viewBox="0 0 16 16"
                                  aria-hidden="true"
                                  focusable="false"
                                  class="svgChecked"
                                >
                                  <rect width="16" height="16" stroke="currentColor" fill="none" stroke-width="1"></rect>
                                </svg> {% endcomment %}

                                <svg class="svgChecked" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                <rect x="1.16675" y="1.44043" width="15.6667" height="15.6667" rx="1.5" stroke="black" stroke-opacity="0.5"/>
                                </svg>

                                <svg
                                  aria-hidden="true"
                                  class="icon icon-checkmark"
                                  width="1.1rem"
                                  height="0.7rem"
                                  viewBox="0 0 11 7"
                                  fill="none"
                                  xmlns="http://www.w3.org/2000/svg"
                                >
                                  <path d="M1.5 3.5L2.83333 4.75L4.16667 6L9.5 1"
                                    stroke="currentColor"
                                    stroke-width="1.75"
                                    stroke-linecap="round"
                                    stroke-linejoin="round" />
                                </svg>

                                <span aria-hidden="true">{{ value.label | escape }} {% comment %}({{ value.count }}){% endcomment %}</span>
                                <span class="visually-hidden">
                                  {{- value.label | escape }} (
                                  {%- if value.count == 1 -%}
                                    {{- 'products.facets.product_count_simple.one' | t: count: value.count -}}
                                  {%- else -%}
                                    {{- 'products.facets.product_count_simple.other' | t: count: value.count -}}
                                  {%- endif -%}
                                  )</span
                                >
                              </label>
                            </li>
                          {%- endfor -%}
                        </ul>
                      </fieldset>
                      {% comment %} {%- if filter.values.size > 30 and filter_type == 'vertical' -%}
                        <show-more-button>
                          <button
                            class="button-show-more link underlined-link no-js-hidden"
                            id="Show-More-{{ forloop.index }}-{{ section.id }}"
                            type="button"
                          >
                            <span class="label-show-more label-text"
                              ><span aria-hidden="true">+ </span>{{ 'products.facets.show_more' | t -}}
                            </span>
                            <span class="label-show-less label-text hidden"
                              ><span aria-hidden="true">- </span>{{ 'products.facets.show_less' | t -}}
                            </span>
                          </button>
                        </show-more-button>
                      {%- endif %} {% endcomment %}
                    </div>
                  </details>
                {% when 'price_range' %}
                  {% liquid
                    assign currencies_using_comma_decimals = 'ANG,ARS,BRL,BYN,BYR,CLF,CLP,COP,CRC,CZK,DKK,EUR,HRK,HUF,IDR,ISK,MZN,NOK,PLN,RON,RUB,SEK,TRY,UYU,VES,VND' | split: ','
                    assign uses_comma_decimals = false
                    if currencies_using_comma_decimals contains cart.currency.iso_code
                      assign uses_comma_decimals = true
                    endif
                  %}
                  <details
                    id="Details-{{ forloop.index }}-{{ section.id }}"
                    class="{% if filter_type == 'horizontal' %}disclosure-has-popup facets__disclosure{% else %} facets__disclosure-vertical{% endif %} js-filter"
                    data-index="{{ forloop.index }}"
                    {% if filter_type == 'vertical' and forloop.index == 1 %}
                      open
                    {% endif %}
                  >
                    <summary class="cstm-facets facets__summary caption-large focus-offset">
                      <div>
                        <span>{{ filter.label | escape }}</span>
                        <div class="iconMinus">
                         <svg xmlns="http://www.w3.org/2000/svg" width="16" height="2" viewBox="0 0 16 2" fill="none">
                        <path d="M15.3438 1.13062C15.3438 1.25494 15.2944 1.37416 15.2065 1.46207C15.1185 1.54998 14.9993 1.59937 14.875 1.59937H1.125C1.00068 1.59937 0.881451 1.54998 0.793544 1.46207C0.705636 1.37416 0.65625 1.25494 0.65625 1.13062C0.65625 1.00629 0.705636 0.887067 0.793544 0.799159C0.881451 0.711251 1.00068 0.661865 1.125 0.661865H14.875C14.9993 0.661865 15.1185 0.711251 15.2065 0.799159C15.2944 0.887067 15.3438 1.00629 15.3438 1.13062Z" fill="black"/>
                        </svg>
                        </div>
                        <div class="iconPlus">
                         <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                          <path d="M15.3438 7.99976C15.3438 8.12408 15.2944 8.2433 15.2065 8.33121C15.1185 8.41912 14.9993 8.46851 14.875 8.46851H8.46875V14.8748C8.46875 14.9991 8.41936 15.1183 8.33146 15.2062C8.24355 15.2941 8.12432 15.3435 8 15.3435C7.87568 15.3435 7.75645 15.2941 7.66854 15.2062C7.58064 15.1183 7.53125 14.9991 7.53125 14.8748V8.46851H1.125C1.00068 8.46851 0.881451 8.41912 0.793544 8.33121C0.705636 8.2433 0.65625 8.12408 0.65625 7.99976C0.65625 7.87544 0.705636 7.75621 0.793544 7.6683C0.881451 7.58039 1.00068 7.53101 1.125 7.53101H7.53125V1.12476C7.53125 1.00044 7.58064 0.881207 7.66854 0.793299C7.75645 0.705392 7.87568 0.656006 8 0.656006C8.12432 0.656006 8.24355 0.705392 8.33146 0.793299C8.41936 0.881207 8.46875 1.00044 8.46875 1.12476V7.53101H14.875C14.9993 7.53101 15.1185 7.58039 15.2065 7.6683C15.2944 7.75621 15.3438 7.87544 15.3438 7.99976Z" fill="black"/>
                          </svg>
                        </div>
                      </div>
                    </summary>
                    <div
                      id="Facet-{{ forloop.index }}-{{ section.id }}"
                      class="{% if filter_type == 'horizontal' %}facets__display{% else %}facets__display-vertical{% endif %}"
                    >
                      <div class="{% if filter_type == 'horizontal' %}facets__header{% else %}facets__header-vertical{% endif %}">
                        {%- assign max_price_amount = filter.range_max | money | strip_html | escape -%}
                        <span class="facets__selected">
                          {{- 'products.facets.max_price' | t: price: max_price_amount -}}
                        </span>
                        {%- if filter_type != 'vertical' -%}
                          <facet-remove>
                            <a href="{{ filter.url_to_remove }}" class="facets__reset link underlined-link">
                              {{ 'products.facets.reset' | t }}
                            </a>
                          </facet-remove>
                        {%- endif -%}
                      </div>

                      <price-range class="facets__price 111">
                        <div class="range-slider">
                          <input value="0" min="0" max="{{ filter.range_max | money_without_currency | replace: ',', '' }}" type="range">
                          <input value="{{ filter.range_max | money_without_currency | remove: '.00' | replace: ',', '' }}" min="0" max="{{ filter.range_max | money_without_currency | replace: ',', '' }}" type="range">
                          <svg width="100%" height="24">
                            {% comment %}<line x1="4" y1="0" x2="480" y2="0" stroke="#444" stroke-width="12" stroke-dasharray="1 28"></line> {% endcomment %}
                          </svg>
                        <div class="price-theme-input">
                        {% comment %}<span class="field-currency">{{ cart.currency.symbol }}</span>{%endcomment%}
                        <div class="field">
                          <input
                            class="field__input"
                            name="{{ filter.min_value.param_name }}"
                            id="Filter-{{ filter.label | escape }}-GTE"
                            {%- if filter.min_value.value -%}
                              {%- if uses_comma_decimals -%}
                                value="{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                              {%- else -%}
                                value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
                              {%- endif %}
                            {%- endif -%}
                            type="number"
                            placeholder="0"
                            min="0"
                            {%- if uses_comma_decimals -%}
                              max="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                            {%- else -%}
                              max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                            {% endif %}
                          >
                          <label class="field__label" for="Filter-{{ filter.label | escape }}-GTE">
                            {{- 'products.facets.from' | t -}}
                          </label>
                        </div>
                        {%- if filter_type != 'vertical' -%}
                           {% comment %}<span class="field-currency">{{ cart.currency.symbol }}</span>{%endcomment%}
                        {%- endif -%}
                        <div class="field">
                          <input
                            class="field__input"
                            name="{{ filter.max_value.param_name }}"
                            id="Filter-{{ filter.label | escape }}-LTE"
                            {%- if filter.max_value.value -%}
                              {%- if uses_comma_decimals -%}
                                value="{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                              {%- else -%}
                                value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
                              {%- endif %}
                            {%- endif -%}
                            type="number"
                            min="0"
                            {%- if uses_comma_decimals -%}
                              placeholder="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                              max="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                            {%- else -%}
                              placeholder="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                              max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                            {% endif %}
                          >
                          <label class="field__label" for="Filter-{{ filter.label | escape }}-LTE">
                            {{- 'products.facets.to' | t -}}
                          </label>
                        </div>
                        </div>
                        </div>
                      </price-range>  

                    </div>
                  </details>
              {% endcase %}
            {%- endfor -%}
            <noscript>
              <button type="submit" class="facets__button-no-js button button--secondary">
                {{ 'products.facets.filter_button' | t }}
              </button>
            </noscript>
          </div>
          {% comment %} Pills after filtes on filter type horizontal {% endcomment %}
          {%- if filter_type == 'horizontal' -%}
            <div class="active-facets active-facets-desktop">
              {%- for filter in results.filters -%}
                {%- for value in filter.active_values -%}
                  <facet-remove>
                    <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
                      <span class="active-facets__button-inner button button--tertiary">
                        {{ filter.label }}: {{ value.label | escape }}
                        {% render 'icon-close-small' %}
                        <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
                      </span>
                    </a>
                  </facet-remove>
                {%- endfor -%}
                {% if filter.type == 'price_range' %}
                  {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                    <facet-remove>
                      <a href="{{ filter.url_to_remove }}" class="active-facets__button active-facets__button--light">
                        <span class="active-facets__button-inner button button--tertiary">
                          {%- if filter.min_value.value -%}
                            {{ filter.min_value.value | money }}
                          {%- else -%}
                            {{ 0 | money }}
                          {%- endif -%}
                          -
                          {%- if filter.max_value.value -%}
                            {{ filter.max_value.value | money }}
                          {%- else -%}
                            {{ filter.range_max | money }}
                          {%- endif -%}
                          {% render 'icon-close-small' %}
                          <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
                        </span>
                      </a>
                    </facet-remove>
                  {%- endif -%}
                {% endif %}
              {%- endfor -%}
              <facet-remove class="active-facets__button-wrapper">
                <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
                  <span>{{ 'products.facets.clear_all' | t }}</span>
                </a>
              </facet-remove>
            </div>
          {%- endif -%}
        {% endif %}

        {% if results.current_vendor or results.current_type %}
          <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
        {% endif %}

        {%- if filter_type == 'horizontal' -%}
          {% comment %} Sorting and product count are the last elements when filter type is horizontal {% endcomment %}
          {%- if enable_sorting -%}
            <div class="facet-filters sorting caption">
              <div class="facet-filters__field">
                <h2 class="facet-filters__label caption-large text-body">
                  <label for="SortBy">{{ 'products.facets.sort_by_label' | t }}</label>
                </h2>
                <div class="select">
                  {%- assign sort_by = results.sort_by | default: results.default_sort_by -%}
                  <select
                    name="sort_by"
                    class="facet-filters__sort select__select caption-large"
                    id="SortBy"
                    aria-describedby="a11y-refresh-page-message"
                  >
                    {%- for option in results.sort_options -%}
                      <option
                        value="{{ option.value | escape }}"
                        {% if option.value == sort_by %}
                          selected="selected"
                        {% endif %}
                      >
                        {{ option.name | escape }}
                      </option>
                    {%- endfor -%}
                  </select>
                  {% render 'icon-caret' %}
                </div>
              </div>

              <noscript>
                <button type="submit" class="facets__button-no-js button button--secondary">
                  {{ 'products.facets.sort_button' | t }}
                </button>
              </noscript>
            </div>
          {%- endif -%}
          <div class="product-count light" role="status">
            <h2 class="product-count__text text-body">
              <span id="ProductCountDesktop">
                {%- if results.results_count -%}
                  {{ 'templates.search.results_with_count' | t: terms: results.terms, count: results.results_count }}
                {%- elsif results.products_count == results.all_products_count -%}
                  {{ 'products.facets.product_count_simple' | t: count: results.products_count }}
                {%- else -%}
                  {{
                    'products.facets.product_count'
                    | t: product_count: results.products_count, count: results.all_products_count
                  }}
                {%- endif -%}
              </span>
            </h2>
            <div class="loading-overlay__spinner">
              <svg
                aria-hidden="true"
                focusable="false"
                class="spinner"
                viewBox="0 0 66 66"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
              </svg>
            </div>
          </div>
        {%- endif -%}
      </form>
    </facet-filters-form>
    {% comment %} Sorting for vertical filter are grouped with filter when no JS{% endcomment %}
    {%- if enable_sorting and filter_type == 'vertical' -%}
      <facet-filters-form class="small-hide">
        <form class="no-js">
          <div class="facet-filters sorting caption">
            <div class="facet-filters__field">
              <h2 class="facet-filters__label caption-large text-body">
                <label for="SortBy">{{ 'products.facets.sort_by_label' | t }}</label>
              </h2>
              <div class="select">
                {%- assign sort_by = results.sort_by | default: results.default_sort_by -%}
                <select
                  name="sort_by"
                  class="facet-filters__sort select__select caption-large"
                  id="SortBy"
                  aria-describedby="a11y-refresh-page-message"
                >
                  {%- for option in results.sort_options -%}
                    <option
                      value="{{ option.value | escape }}"
                      {% if option.value == sort_by %}
                        selected="selected"
                      {% endif %}
                    >
                      {{ option.name | escape }}
                    </option>
                  {%- endfor -%}
                </select>
                {% render 'icon-caret' %}
              </div>
            </div>

            <noscript>
              <button type="submit" class="facets__button-no-js button button--secondary">
                {{ 'products.facets.sort_button' | t }}
              </button>
            </noscript>
          </div>

          {% if results.current_vendor or results.current_type %}
            <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
          {% endif %}

          {%- if results.terms -%}
            <input type="hidden" name="q" value="{{ results.terms | escape }}">
            <input name="options[prefix]" type="hidden" value="last">
          {%- endif -%}
        </form>
      </facet-filters-form>
    {%- endif -%}
  {%- endif -%}
  {% comment %}  Drawer and mobile filter {% endcomment %}
  <menu-drawer
    class="mobile-facets__wrapper{% if filter_type == 'horizontal' or filter_type == 'vertical' %} medium-hide large-up-hide{% endif %}"
    data-breakpoint="mobile"
  >
    <details class="mobile-facets__disclosure disclosure-has-popup">
      <summary class="mobile-facets__open-wrapper focus-offset">
        <span class="mobile-facets__open{% if filter_type == 'drawer' and enable_filtering == false %} medium-hide large-up-hide{% endif %}">
          {% render 'icon-filter' %}
          <span class="mobile-facets__open-label button-label medium-hide large-up-hide">
            {%- if enable_filtering and enable_sorting -%}
              {{ 'products.facets.filter_and_sort' | t }}
            {%- elsif enable_filtering -%}
              {{ 'products.facets.filter_button' | t }}
            {%- elsif enable_sorting -%}
              {{ 'products.facets.sort_button' | t }}
            {%- endif -%}
          </span>
          <span class="mobile-facets__open-label button-label small-hide">
            {%- if enable_filtering -%}
              {{ 'products.facets.filter_button' | t }}
            {%- endif -%}
          </span>
        </span>
        <span tabindex="0" class="mobile-facets__close mobile-facets__close--no-js">{%- render 'icon-close' -%}</span>
      </summary>
      <facet-filters-form>
        <form id="FacetFiltersFormMobile" class="mobile-facets">
          <div class="mobile-facets__inner gradient">
            <div class="mobile-facets__header">
              <div class="mobile-facets__header-inner">
                <h2 class="mobile-facets__heading medium-hide large-up-hide">
                  {%- if enable_filtering and enable_sorting -%}
                    {{ 'products.facets.filter_and_sort' | t }}
                  {%- elsif enable_filtering -%}
                    {{ 'products.facets.filter_button' | t }}
                  {%- elsif enable_sorting -%}
                    {{ 'products.facets.sort_button' | t }}
                  {%- endif -%}
                </h2>
                <h2 class="mobile-facets__heading small-hide">
                  {%- if enable_filtering -%}
                    {{ 'products.facets.filter_button' | t }}
                  {%- endif -%}
                </h2>
                <p class="mobile-facets__count">
                  {%- if results.results_count -%}
                    {{ 'templates.search.results_with_count' | t: terms: results.terms, count: results.results_count }}
                  {%- elsif results.products_count == results.all_products_count -%}
                    {{ 'products.facets.product_count_simple' | t: count: results.products_count }}
                  {%- else -%}
                    {{
                      'products.facets.product_count'
                      | t: product_count: results.products_count, count: results.all_products_count
                    }}
                  {%- endif -%}
                </p>
                <div class="Filters-selected"><p class="counter" value="0">0</p><h3>Filters selected</h3></div>
              </div>
            </div>
            <div class="mobile-facets__main has-submenu gradient">
              {%- if enable_filtering -%}
                {%- for filter in results.filters -%}
                  {% case filter.type %}
                    {% when 'boolean', 'list' %}
                     

{%comment%}mobile facets top bar and drawer{%endcomment%}
<div id="Details-Mobile-{{ forloop.index }}-{{ section.id }}" class="this mobile-facets__details mobile-facets-filter-menu cstmFacetsWrapper js-filter"
                          data-index="mobile-{{ forloop.index }}"
                          label="{{ filter.label | escape }}"
                          {% if forloop.last %}
                            style="margin-bottom: 100px;"
                          {% endif %}
                      >
                        {% assign filterHandle = filter.label | handle %}
                        <div class="mobile-facets__dropdown">
                                            <div class="mobile-facets__content {% unless forloop.index == 1 or forloop.index == 2 or forloop.index == 3 %}closeWrapper{% endunless %}" id="FacetMobile-{{ forloop.index }}-{{ section.id }}">
                      <div class="topWrapperMobileFilter">
                      <div class="titleMobileFilters">
                      {{ filter.label | escape }}
                      </div>
                      <div class="iconChange">
                          <div class="iconMinus active">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="2" viewBox="0 0 16 2" fill="none">
                            <path d="M15.3438 1.13062C15.3438 1.25494 15.2944 1.37416 15.2065 1.46207C15.1185 1.54998 14.9993 1.59937 14.875 1.59937H1.125C1.00068 1.59937 0.881451 1.54998 0.793544 1.46207C0.705636 1.37416 0.65625 1.25494 0.65625 1.13062C0.65625 1.00629 0.705636 0.887067 0.793544 0.799159C0.881451 0.711251 1.00068 0.661865 1.125 0.661865H14.875C14.9993 0.661865 15.1185 0.711251 15.2065 0.799159C15.2944 0.887067 15.3438 1.00629 15.3438 1.13062Z" fill="black"></path>
                            </svg>
                          </div>

                          <div class="iconPlus">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M15.3438 7.99976C15.3438 8.12408 15.2944 8.2433 15.2065 8.33121C15.1185 8.41912 14.9993 8.46851 14.875 8.46851H8.46875V14.8748C8.46875 14.9991 8.41936 15.1183 8.33146 15.2062C8.24355 15.2941 8.12432 15.3435 8 15.3435C7.87568 15.3435 7.75645 15.2941 7.66854 15.2062C7.58064 15.1183 7.53125 14.9991 7.53125 14.8748V8.46851H1.125C1.00068 8.46851 0.881451 8.41912 0.793544 8.33121C0.705636 8.2433 0.65625 8.12408 0.65625 7.99976C0.65625 7.87544 0.705636 7.75621 0.793544 7.6683C0.881451 7.58039 1.00068 7.53101 1.125 7.53101H7.53125V1.12476C7.53125 1.00044 7.58064 0.881207 7.66854 0.793299C7.75645 0.705392 7.87568 0.656006 8 0.656006C8.12432 0.656006 8.24355 0.705392 8.33146 0.793299C8.41936 0.881207 8.46875 1.00044 8.46875 1.12476V7.53101H14.875C14.9993 7.53101 15.1185 7.58039 15.2065 7.6683C15.2944 7.75621 15.3438 7.87544 15.3438 7.99976Z" fill="black"></path>
                            </svg>
                          </div>
                      </div>
                      </div>
                      
                    
                      <ul class="{{ filter.label | escape }}-Ul mobile-facets__list list-unstyled" role="list">
                        {%- for value in filter.values -%}
                          {% if filterHandle contains 'gender' or filterHandle contains 'Gender' %}
                            {% if value.label == 'Men' or value.label == 'Women' %}
                            <li class="{% if filterHandle contains 'color' or filterHandle contains 'colour' %}colorCstmLi{% endif %} mobile-facets__item list-menu__item">
                              <label
                                for="Filter-{{ filter.param_name | escape }}-mobile-{{ forloop.index }}"
                                class="mobile-facets__label{% if value.count == 0 and value.active == false %} mobile-facets__label--disabled{% endif %}"
                              >
                                <input
                                  {% if filterHandle contains 'color' or filterHandle contains 'colour' %}
                                    style="background-color:{{ value.value | handle }};background-image:url({{ value.value | handle | append: '.png' | file_url }});"
                                  {% endif %}
                                  class="mobile-facets__checkbox {% if filterHandle contains 'color' or filterHandle contains 'colour' %}colorCstmFilterInput{% endif %}"
                                  type="checkbox"
                                  name="{{ value.param_name }}"
                                  value="{{ value.value }}"
                                  id="Filter-{{ filter.param_name | escape }}-mobile-{{ forloop.index }}"
                                  {% if value.active %}
                                  checked
                                  {% endif %}
                                  {% if value.count == 0 and value.active == false %}
                                  disabled
                                  {% endif %}
                                >
    
                                <span class="mobile-facets__highlight"></span>
    
                                <svg
                                  width="1.6rem"
                                  height="1.6rem"
                                  viewBox="0 0 16 16"
                                  aria-hidden="true"
                                  focusable="false"
                                >
                                  <rect width="16" height="16" stroke="currentColor" fill="none" stroke-width="1"></rect>
                                </svg>
    
                                <svg
                                  aria-hidden="true"
                                  class="icon icon-checkmark"
                                  width="1.1rem"
                                  height="0.7rem"
                                  viewBox="0 0 11 7"
                                  fill="none"
                                  xmlns="http://www.w3.org/2000/svg"
                                >
                                  <path d="M1.5 3.5L2.83333 4.75L4.16667 6L9.5 1" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
    
                                <span aria-hidden="true">{{ value.label | escape }} {% comment %}({{ value.count }}){% endcomment %}</span>
                                <span class="visually-hidden">
                                  {{- value.label | escape }} (
                                  {%- if value.count == '1' -%}
                                  {{- 'products.facets.product_count_simple.one' | t: count: value.count -}}
                                  {%- else -%}
                                  {{- 'products.facets.product_count_simple.other' | t: count: value.count -}}
                                  {%- endif -%}
                                  )</span
                                >
                              </label>
                            </li>
                            {% endif %}
                          {% else %}
                          <li class="{% if filterHandle contains 'color' or filterHandle contains 'colour' %}colorCstmLi{% endif %} mobile-facets__item list-menu__item">
                          <label
                            for="Filter-{{ filter.param_name | escape }}-mobile-{{ forloop.index }}"
                            class="mobile-facets__label{% if value.count == 0 and value.active == false %} mobile-facets__label--disabled{% endif %}"
                          >
                            <input
                              {% if filterHandle contains 'color' or filterHandle contains 'colour' %}
                                style="background-color:{{ value.value | handle }};background-image:url({{ value.value | handle | append: '.png' | file_url }});"
                              {% endif %}
                              class="mobile-facets__checkbox {% if filterHandle contains 'color' or filterHandle contains 'colour' %}colorCstmFilterInput{% endif %}"
                              type="checkbox"
                              name="{{ value.param_name }}"
                              value="{{ value.value }}"
                              id="Filter-{{ filter.param_name | escape }}-mobile-{{ forloop.index }}"
                              {% if value.active %}
                              checked
                              {% endif %}
                              {% if value.count == 0 and value.active == false %}
                              disabled
                              {% endif %}
                            >

                            <span class="mobile-facets__highlight"></span>

                            <svg
                              width="1.6rem"
                              height="1.6rem"
                              viewBox="0 0 16 16"
                              aria-hidden="true"
                              focusable="false"
                            >
                              <rect width="16" height="16" stroke="currentColor" fill="none" stroke-width="1"></rect>
                            </svg>

                            <svg
                              aria-hidden="true"
                              class="icon icon-checkmark"
                              width="1.1rem"
                              height="0.7rem"
                              viewBox="0 0 11 7"
                              fill="none"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <path d="M1.5 3.5L2.83333 4.75L4.16667 6L9.5 1" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>

                            <span aria-hidden="true">{{ value.label | escape }} {% comment %}({{ value.count }}){% endcomment %}</span>
                            <span class="visually-hidden">
                              {{- value.label | escape }} (
                              {%- if value.count == '1' -%}
                              {{- 'products.facets.product_count_simple.one' | t: count: value.count -}}
                              {%- else -%}
                              {{- 'products.facets.product_count_simple.other' | t: count: value.count -}}
                              {%- endif -%}
                              )</span
                            >
                          </label>
                        </li>
                        {% endif %}
                        {%- endfor -%}
                      </ul>

                      <div class="no-js-hidden mobile-facets__footer mobile-facets__footerCstm gradient">
                        <facet-remove class="mobile-facets__clear-wrapper">
                          <a href="{{ filter.url_to_remove }}" class="mobile-facets__clear underlined-link">
                            {{- 'products.facets.clear' | t -}}
                          </a>
                        </facet-remove>
                        <button
                          type="button"
                          class="no-js-hidden button button--primary"
                          onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                        >
                          {{ 'products.facets.apply' | t }}
                        </button>
                        <noscript
                          ><button class="button button--primary">
                            {{ 'products.facets.apply' | t }}
                          </button></noscript
                        >
                      </div>
                  </div>
                </div>

                        <div
                          id="FacetMobile-{{ forloop.index }}-{{ section.id }}"
                          class="mobile-facets__submenu gradient"
                        >
                          <button
                            class="mobile-facets__close-button link link--text focus-inset"
                            aria-expanded="true"
                            type="button"
                          >
                            {% render 'icon-arrow' %}
                            {{ filter.label | escape }}
                          </button>
                          <ul class="mobile-facets__list list-unstyled" role="list">
                            {%- for value in filter.values -%}
                              <li class="mobile-facets__item list-menu__item">
                                <label
                                  for="Filter-{{ filter.param_name | escape }}-mobile-{{ forloop.index }}"
                                  class="mobile-facets__label{% if value.count == 0 and value.active == false %} mobile-facets__label--disabled{% endif %}"
                                >
                                  <input
                                    class="mobile-facets__checkbox"
                                    type="checkbox"
                                    name="{{ value.param_name }}"
                                    value="{{ value.value }}"
                                    id="Filter-{{ filter.param_name | escape }}-mobile-{{ forloop.index }}"
                                    {% if value.active %}
                                      checked
                                    {% endif %}
                                    {% if value.count == 0 and value.active == false %}
                                      disabled
                                    {% endif %}
                                  >

                                  <span class="mobile-facets__highlight"></span>

                                  <svg
                                    width="1.6rem"
                                    height="1.6rem"
                                    viewBox="0 0 16 16"
                                    aria-hidden="true"
                                    focusable="false"
                                  >
                                    <rect width="16" height="16" stroke="currentColor" fill="none" stroke-width="1"></rect>
                                  </svg>

                                  <svg
                                    aria-hidden="true"
                                    class="icon icon-checkmark"
                                    width="1.1rem"
                                    height="0.7rem"
                                    viewBox="0 0 11 7"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                  >
                                    <path d="M1.5 3.5L2.83333 4.75L4.16667 6L9.5 1" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" />
                                  </svg>

                                  <span aria-hidden="true">{{ value.label | escape }} {% comment %}({{ value.count }}){% endcomment %}</span>
                                  <span class="visually-hidden">
                                    {{- value.label | escape }} (
                                    {%- if value.count == '1' -%}
                                      {{- 'products.facets.product_count_simple.one' | t: count: value.count -}}
                                    {%- else -%}
                                      {{- 'products.facets.product_count_simple.other' | t: count: value.count -}}
                                    {%- endif -%}
                                    )</span
                                  >
                                </label>
                              </li>
                            {%- endfor -%}
                          </ul>

                          <div class="no-js-hidden mobile-facets__footer gradient">
                            <facet-remove class="mobile-facets__clear-wrapper">
                              <a href="{{ filter.url_to_remove }}" class="mobile-facets__clear underlined-link">
                                {{- 'products.facets.clear' | t -}}
                              </a>
                            </facet-remove>
                            <button
                              type="button"
                              class="no-js-hidden button button--primary"
                              onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                            >
                              {{ 'products.facets.apply' | t }}
                            </button>
                            <noscript
                              ><button class="button button--primary">
                                {{ 'products.facets.apply' | t }}
                              </button></noscript
                            >
                          </div>
                        </div>
</div>


                    {% when 'price_range' %}
                      <div
                        id="Details-Mobile-{{ forloop.index }}-{{ section.id }}"
                        class="this2 priceCstm mobile-facets__details js-filter cstmFacetsWrapper"
                        data-index="mobile-{{ forloop.index }}"
                      >
                       
                        <div
                          id="FacetMobile-{{ forloop.index }}-{{ section.id }}"
                          class="gradient mobile-facets__content closeWrapper"
                        >
                          <div class="topWrapperMobileFilter">
                      <div class="titleMobileFilters">
                      {{ filter.label | escape }}
                      </div>
                      <div class="iconChange">
                          <div class="iconMinus active">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="2" viewBox="0 0 16 2" fill="none">
                            <path d="M15.3438 1.13062C15.3438 1.25494 15.2944 1.37416 15.2065 1.46207C15.1185 1.54998 14.9993 1.59937 14.875 1.59937H1.125C1.00068 1.59937 0.881451 1.54998 0.793544 1.46207C0.705636 1.37416 0.65625 1.25494 0.65625 1.13062C0.65625 1.00629 0.705636 0.887067 0.793544 0.799159C0.881451 0.711251 1.00068 0.661865 1.125 0.661865H14.875C14.9993 0.661865 15.1185 0.711251 15.2065 0.799159C15.2944 0.887067 15.3438 1.00629 15.3438 1.13062Z" fill="black"></path>
                            </svg>
                          </div>

                          <div class="iconPlus">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M15.3438 7.99976C15.3438 8.12408 15.2944 8.2433 15.2065 8.33121C15.1185 8.41912 14.9993 8.46851 14.875 8.46851H8.46875V14.8748C8.46875 14.9991 8.41936 15.1183 8.33146 15.2062C8.24355 15.2941 8.12432 15.3435 8 15.3435C7.87568 15.3435 7.75645 15.2941 7.66854 15.2062C7.58064 15.1183 7.53125 14.9991 7.53125 14.8748V8.46851H1.125C1.00068 8.46851 0.881451 8.41912 0.793544 8.33121C0.705636 8.2433 0.65625 8.12408 0.65625 7.99976C0.65625 7.87544 0.705636 7.75621 0.793544 7.6683C0.881451 7.58039 1.00068 7.53101 1.125 7.53101H7.53125V1.12476C7.53125 1.00044 7.58064 0.881207 7.66854 0.793299C7.75645 0.705392 7.87568 0.656006 8 0.656006C8.12432 0.656006 8.24355 0.705392 8.33146 0.793299C8.41936 0.881207 8.46875 1.00044 8.46875 1.12476V7.53101H14.875C14.9993 7.53101 15.1185 7.58039 15.2065 7.6683C15.2944 7.75621 15.3438 7.87544 15.3438 7.99976Z" fill="black"></path>
                            </svg>
                          </div>
                      </div>
                      </div>
<div class="mobile-facets__list">
                          {%- assign max_price_amount = filter.range_max | money | strip_html | escape -%}
                          <p class="mobile-facets__info">
                            {{ 'products.facets.max_price' | t: price: max_price_amount }}
                          </p>

                          <price-range class="facets__price 222">
                        <div class="range-slider">
                          <input value="0" min="0" max="{{ filter.range_max | money_without_currency | replace: ',', '' }}" type="range">
                          <input value="{{ filter.range_max | money_without_currency | remove: '.00' | replace: ',', '' }}" min="0" max="{{ filter.range_max | money_without_currency | replace: ',', '' }}" type="range">
                          <svg width="100%" height="24">
                            {% comment %}<line x1="4" y1="0" x2="480" y2="0" stroke="#444" stroke-width="12" stroke-dasharray="1 28"></line> {% endcomment %}
                          </svg>
                        <div class="price-theme-input">
                        {% comment %}<span class="field-currency">{{ cart.currency.symbol }}</span>{%endcomment%}
                        <div class="field">
                          <input
                            class="field__input"
                            name="{{ filter.min_value.param_name }}"
                            id="Filter-{{ filter.label | escape }}-GTE"
                            {%- if filter.min_value.value -%}
                              {%- if uses_comma_decimals -%}
                                value="{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                              {%- else -%}
                                value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
                              {%- endif %}
                            {%- endif -%}
                            type="number"
                            placeholder="0"
                            min="0"
                            {%- if uses_comma_decimals -%}
                              max="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                            {%- else -%}
                              max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                            {% endif %}
                          >
                          <label class="field__label" for="Filter-{{ filter.label | escape }}-GTE">
                            {{- 'products.facets.from' | t -}}
                          </label>
                        </div>
                        {%- if filter_type != 'vertical' -%}
                           {% comment %}<span class="field-currency">{{ cart.currency.symbol }}</span>{%endcomment%}
                        {%- endif -%}
                        <div class="field">
                          <input
                            class="field__input"
                            name="{{ filter.max_value.param_name }}"
                            id="Filter-{{ filter.label | escape }}-LTE"
                            {%- if filter.max_value.value -%}
                              {%- if uses_comma_decimals -%}
                                value="{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                              {%- else -%}
                                value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
                              {%- endif %}
                            {%- endif -%}
                            type="number"
                            min="0"
                            {%- if uses_comma_decimals -%}
                              placeholder="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                              max="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
                            {%- else -%}
                              placeholder="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                              max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
                            {% endif %}
                          >
                          <label class="field__label" for="Filter-{{ filter.label | escape }}-LTE">
                            {{- 'products.facets.to' | t -}}
                          </label>
                        </div>
                        </div>
                        </div>
                      </price-range>  

                          </div>
                          
                          <div class="no-js-hidden mobile-facets__footer mobile-facets__footerCstm ">
                            <facet-remove class="mobile-facets__clear-wrapper">
                              <a href="{{ filter.url_to_remove }}" class="mobile-facets__clear underlined-link">
                                {{- 'products.facets.clear' | t -}}
                              </a>
                            </facet-remove>
                            <button
                              type="button"
                              class="no-js-hidden button button--primary"
                              onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                            >
                              {{ 'products.facets.apply' | t }}
                            </button>
                            <noscript
                              ><button class="button button--primary">
                                {{ 'products.facets.apply' | t }}
                              </button></noscript
                            >
                          </div>
                        </div>
                      </div>
                  {% endcase %}



                {%- endfor -%}
              {%- endif -%}

              {%- if enable_sorting -%}
                <div class="this3 mobile-facets__details js-filter{% if filter_type == 'drawer' %} medium-hide large-up-hide{% endif %}" data-index="mobile-{{ forloop.index }}">
  <div class="mobile-facets__summary">
    <div class="mobile-facets__sort ">
      
      {% for option in results.sort_options %}
        <div class="radioCstmmobile">
          <input type="radio" id="{{ option.value | escape }}" name="sort_by" value="{{ option.value | escape }}"
            {% if option.value == sort_by %}
              checked="checked"
            {% endif %}
          >
          <label for="{{ option.value | escape }}">{{ option.name | escape }}</label>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

              {%- endif -%}

              <div class="mobile-facets__footer">
                <facet-remove class="mobile-facets__clear-wrapper">
                  <a href="{{ results_url }}" class="mobile-facets__clear underlined-link">
                    {% comment %} {{- 'products.facets.clear_all' | t -}} {% endcomment %} CLEAR ALL
                  </a>
                </facet-remove>
                <button
                  type="button"
                  class="no-js-hidden button button--primary"
                  onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
                >
                  {% comment %} {{ 'products.facets.apply' | t }} {% endcomment %} APPLY FILTERS
                </button>
                <noscript
                  ><button class="button button--primary">{{ 'products.facets.apply' | t }}</button></noscript
                >
              </div>
            </div>

            {% if results.current_vendor or results.current_type %}
              <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
            {% endif %}

            {%- if results.terms -%}
              <input type="hidden" name="q" value="{{ results.terms | escape }}">
              <input name="options[prefix]" type="hidden" value="last">
            {%- endif -%}
          </div>
        </form>
      </facet-filters-form>
    </details>
  </menu-drawer>

  <div class="active-facets active-facets-mobile medium-hide large-up-hide">
    {%- for filter in results.filters -%}
      {%- for value in filter.active_values -%}
        <facet-remove>
          <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
            <span class="active-facets__button-inner button button--tertiary">
              {{ filter.label }}: {{ value.label | escape }}
              {% render 'icon-close-small' %}
              <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
            </span>
          </a>
        </facet-remove>
      {%- endfor -%}

      {%- if filter.type == 'price_range' -%}
        {%- if filter.min_value.value != null or filter.max_value.value != null -%}
          <facet-remove>
            <a href="{{ filter.url_to_remove }}" class="active-facets__button active-facets__button--light">
              <span class="active-facets__button-inner button button--tertiary">
                {%- if filter.min_value.value -%}
                  {{ filter.min_value.value | money }}
                {%- else -%}
                  {{ 0 | money }}
                {%- endif -%}
                -
                {%- if filter.max_value.value -%}
                  {{ filter.max_value.value | money }}
                {%- else -%}
                  {{ filter.range_max | money }}
                {%- endif -%}
                {% render 'icon-close-small' %}
                <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
              </span>
            </a>
          </facet-remove>
        {%- endif -%}
      {%- endif -%}
    {%- endfor -%}
    <facet-remove class="active-facets__button-wrapper">
      <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
        <span>{{ 'products.facets.clear_all' | t }}</span>
      </a>
    </facet-remove>
  </div>
  {% comment %} Sort, product count and filter pills at the end when filter is type of Drawer for the correct tabbing order {% endcomment %}
  {%- if enable_sorting and filter_type == 'drawer' -%}
    <facet-filters-form class="facets small-hide">
      <form id="FacetSortDrawerForm" class="facets__form">
        <div class="facet-filters sorting caption small-hide">
          <div class="facet-filters__field">
            <h2 class="facet-filters__label caption-large text-body">
              <label for="SortBy">{{ 'products.facets.sort_by_label' | t }}</label>
            </h2>
            <div class="select">
              {%- assign sort_by = results.sort_by | default: results.default_sort_by -%}
              <select
                name="sort_by"
                class="facet-filters__sort select__select caption-large"
                id="SortBy"
                aria-describedby="a11y-refresh-page-message"
              >
                {%- for option in results.sort_options -%}
                  <option
                    value="{{ option.value | escape }}"
                    {% if option.value == sort_by %}
                      selected="selected"
                    {% endif %}
                  >
                    {{ option.name | escape }}
                  </option>
                {%- endfor -%}
              </select>
              {% render 'icon-caret' %}
            </div>
          </div>

          <noscript>
            <button type="submit" class="facets__button-no-js button button--secondary">
              {{ 'products.facets.sort_button' | t }}
            </button>
          </noscript>
        </div>

        {% if results.current_vendor or results.current_type %}
          <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
        {% endif %}

        {%- if results.terms -%}
          <input type="hidden" name="q" value="{{ results.terms | escape }}">
          <input name="options[prefix]" type="hidden" value="last">
        {%- endif -%}
      </form>
    </facet-filters-form>
  {%- endif -%}
  <div class="product-count light{% if filter_type == 'vertical' or filter_type == 'horizontal' %} medium-hide large-up-hide{% endif %}"
    role="status"
  >
    <h3 class="product-count__text text-body">
      <span id="ProductCount">
        {%- if results.results_count -%}
          {{ 'templates.search.results_with_count' | t: terms: results.terms, count: results.results_count }}
        {%- elsif results.products_count == results.all_products_count -%}
          {{ 'products.facets.product_count_simple' | t: count: results.products_count | remove:'products' }} items found
        {%- else -%}
          {{
            'products.facets.product_count'
            | t: product_count: results.products_count, count: results.all_products_count
          }}
        {%- endif -%}
      </span>
    </h3>

    <div class="loading-overlay__spinner">
      <svg
        aria-hidden="true"
        focusable="false"
        class="spinner"
        viewBox="0 0 66 66"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
      </svg>
    </div>
  </div>
  <div class="gridViewChangeMobile">
  <div class="singleViewMobile">
    <svg class="svgSingle" xmlns="http://www.w3.org/2000/svg" width="8" height="16" viewBox="0 0 8 16" fill="none">
    <path d="M5.0444 15.3821H2.59774C2.0452 15.3821 1.5153 15.1626 1.1246 14.7719C0.733898 14.3812 0.514404 13.8513 0.514404 13.2988V2.5721C0.514404 2.01957 0.733898 1.48966 1.1246 1.09896C1.5153 0.708263 2.0452 0.48877 2.59774 0.48877H5.0419C5.59444 0.48877 6.12434 0.708263 6.51504 1.09896C6.90575 1.48966 7.12524 2.01957 7.12524 2.5721V13.2988C7.12524 13.8509 6.90609 14.3804 6.51593 14.771C6.12577 15.1617 5.59651 15.3814 5.0444 15.3821ZM2.59774 1.3221C2.26622 1.3221 1.94827 1.4538 1.71385 1.68822C1.47943 1.92264 1.34774 2.24058 1.34774 2.5721V13.2988C1.34774 13.6303 1.47943 13.9482 1.71385 14.1827C1.94827 14.4171 2.26622 14.5488 2.59774 14.5488H5.0419C5.37343 14.5488 5.69137 14.4171 5.92579 14.1827C6.16021 13.9482 6.29191 13.6303 6.29191 13.2988V2.5721C6.29191 2.24058 6.16021 1.92264 5.92579 1.68822C5.69137 1.4538 5.37343 1.3221 5.0419 1.3221H2.59774Z" fill="black" fill-opacity="0.3"/>
    <path d="M5.0444 15.5321L5.04459 15.5321C5.63644 15.5314 6.20381 15.2958 6.62206 14.877C7.04031 14.4583 7.27524 13.8906 7.27524 13.2988V2.5721C7.27524 1.97979 7.03994 1.41173 6.62111 0.992898C6.20228 0.574066 5.63422 0.33877 5.0419 0.33877H2.59774C2.00542 0.33877 1.43736 0.574066 1.01853 0.992898C0.599701 1.41173 0.364404 1.97979 0.364404 2.5721V13.2988C0.364404 13.8911 0.599701 14.4591 1.01853 14.878C1.43736 15.2968 2.00542 15.5321 2.59774 15.5321L5.0444 15.5321ZM1.81992 1.79429C2.02621 1.588 2.306 1.4721 2.59774 1.4721H5.0419C5.33364 1.4721 5.61343 1.588 5.81972 1.79429C6.02601 2.00058 6.14191 2.28037 6.14191 2.5721V13.2988C6.14191 13.5905 6.02601 13.8703 5.81972 14.0766C5.61343 14.2829 5.33364 14.3988 5.0419 14.3988H2.59774C2.306 14.3988 2.02621 14.2829 1.81992 14.0766C1.61363 13.8703 1.49774 13.5905 1.49774 13.2988V2.5721C1.49774 2.28036 1.61363 2.00058 1.81992 1.79429Z" stroke="black" stroke-opacity="0.3" stroke-width="0.3"/>
    </svg>
  </div>
  <div class="TwoViewMobile">
    <svg class="svgDouble" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
    <path d="M13.3632 15.5321L13.3634 15.5321C13.9553 15.5314 14.5226 15.2958 14.9409 14.877C15.3591 14.4583 15.5941 13.8906 15.5941 13.2988V2.5721C15.5941 1.97979 15.3588 1.41173 14.9399 0.992898C14.5211 0.574066 13.953 0.33877 13.3607 0.33877H10.9166C10.3242 0.33877 9.75618 0.574066 9.33735 0.992898C8.91852 1.41173 8.68322 1.97979 8.68322 2.5721V13.2988C8.68322 13.8911 8.91852 14.4591 9.33735 14.878C9.75618 15.2968 10.3242 15.5321 10.9166 15.5321L13.3632 15.5321ZM10.1387 1.79429C10.345 1.588 10.6248 1.4721 10.9166 1.4721H13.3607C13.6525 1.4721 13.9323 1.588 14.1385 1.79429C14.3448 2.00058 14.4607 2.28036 14.4607 2.5721V13.2988C14.4607 13.5905 14.3448 13.8703 14.1385 14.0766C13.9323 14.2829 13.6525 14.3988 13.3607 14.3988H10.9166C10.6248 14.3988 10.345 14.2829 10.1387 14.0766C9.93245 13.8703 9.81656 13.5905 9.81656 13.2988V2.5721C9.81656 2.28036 9.93245 2.00058 10.1387 1.79429ZM2.63656 15.5321H5.08322C5.67554 15.5321 6.2436 15.2968 6.66243 14.878C7.08126 14.4591 7.31656 13.8911 7.31656 13.2988V2.5721C7.31656 1.97979 7.08126 1.41173 6.66243 0.992898C6.2436 0.574066 5.67554 0.33877 5.08322 0.33877H2.63656C2.04424 0.33877 1.47618 0.574066 1.05735 0.992898C0.63852 1.41173 0.403223 1.97979 0.403223 2.5721V13.2988C0.403223 13.8911 0.63852 14.4591 1.05735 14.878C1.47618 15.2968 2.04424 15.5321 2.63656 15.5321ZM1.85874 1.79429C2.06503 1.588 2.34482 1.4721 2.63656 1.4721H5.08322C5.37496 1.4721 5.65475 1.588 5.86104 1.79429C6.06733 2.00058 6.18322 2.28036 6.18322 2.5721V13.2988C6.18322 13.5905 6.06733 13.8703 5.86104 14.0766C5.65475 14.2829 5.37496 14.3988 5.08322 14.3988H2.63656C2.34482 14.3988 2.06503 14.2829 1.85874 14.0766C1.65245 13.8703 1.53656 13.5905 1.53656 13.2988V2.5721C1.53656 2.28036 1.65245 2.00058 1.85874 1.79429Z" fill="black" stroke="black" stroke-width="0.3"/>
    </svg>
  </div>

</div>
  {%- if filter_type == 'drawer' -%}
    <facet-filters-form class="facets facets-pill small-hide">
      <form id="FacetFiltersPillsForm" class="facets__form">
        <div class="active-facets active-facets-desktop">
          {%- for filter in results.filters -%}
            {%- for value in filter.active_values -%}
              <facet-remove>
                <a href="{{ value.url_to_remove }}" class="active-facets__button active-facets__button--light">
                  <span class="active-facets__button-inner button button--tertiary">
                    {{ filter.label }}: {{ value.label | escape }}
                    {% render 'icon-close-small' %}
                    <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
                  </span>
                </a>
              </facet-remove>
            {%- endfor -%}

            {%- if filter.type == 'price_range' -%}
              {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                <facet-remove>
                  <a href="{{ filter.url_to_remove }}" class="active-facets__button active-facets__button--light">
                    <span class="active-facets__button-inner button button--tertiary">
                      {%- if filter.min_value.value -%}
                        {{ filter.min_value.value | money }}
                      {%- else -%}
                        {{ 0 | money }}
                      {%- endif -%}
                      -
                      {%- if filter.max_value.value -%}
                        {{ filter.max_value.value | money }}
                      {%- else -%}
                        {{ filter.range_max | money }}
                      {%- endif -%}
                      {% render 'icon-close-small' %}
                      <span class="visually-hidden">{{ 'products.facets.clear_filter' | t }}</span>
                    </span>
                  </a>
                </facet-remove>
              {%- endif -%}
            {%- endif -%}
          {%- endfor -%}
          <facet-remove class="active-facets__button-wrapper">
            <a href="{{ results_url }}" class="active-facets__button-remove underlined-link">
              <span>{{ 'products.facets.clear_all' | t }}</span>
            </a>
          </facet-remove>
        </div>
      </form>
    </facet-filters-form>
  {%- endif -%}
</div>
