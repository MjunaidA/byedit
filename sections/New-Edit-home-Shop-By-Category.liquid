<style>
  @media screen and (min-width: 990px){
    .newshopbycategory--{{section.id}} {
    width: 100%;
    background: {{section.settings.shopbycategorybackg}};
}
    .newshopbycategoryRow {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: nowrap;
    margin-bottom: 0rem;
    gap:30px;
    box-sizing: border-box; 
    
}
    .newshopbycategory--{{section.id}} .newshopbycategoryRow.two-columns {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: nowrap;
    margin-bottom: 0rem;
    gap: 7rem;
    box-sizing: border-box;
}
    .newshopbycategory--{{section.id}} .newshopbycategoryRow.two-columns .categoryColumn {
    width: 50%; /* Adjust for 2 columns */
    padding-right: 7rem;
    }
    .newshopbycategoryRow .categoryColumn {
    width: 32%;
    position: relative;
    border-right: 1px solid {{section.settings.mainbordercolor}};
    padding-bottom: 5rem;
    padding-right: 3rem;
    padding-top: 5rem;
    }
    .newshopbycategory--{{section.id}} .newcategoryColumn .categoryImg {
    width: 100%;
}
    .newshopbycategory--{{section.id}} .categoryColumn:last-of-type {
    border-right: none;
}

    .newshopbycategory--{{section.id}} h2.headingtxt {
    font-size: 20px;
    line-height: 30px;
    text-align: center;
    font-weight: 400;
    margin-bottom: 0;
    {% for block in section.blocks %}
    color:{{block.settings.newheadingtxtcolr}};
    {% endfor %}
}
    .newshopbycategory--{{section.id}} p.descriptiontxt {
    margin-top: 0;
    text-align: center;
    {% for block in section.blocks %}
    color:{{block.settings.subheadingtxtcolr}};
    {% endfor %}
}
    .newshopbycategory--{{section.id}} .newBtnDiv .btnmain {
     {% for block in section.blocks %}
    color:{{block.settings.newbtncolr}};
    background-color: {{block.settings.newbtnbackg}};
    border: 1px solid {{block.settings.newbtnbordercolr}};
    {% endfor %}
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding:0 2rem;
    cursor: pointer;
    font-size: 1.4rem;
    text-decoration: none;
    letter-spacing: .18rem;
    line-height: 24px;
    border-radius: 2px;
    min-width: 110px;
    width: 100%;
    height: 35px;
    max-width: 18%;
    margin: 0 auto;
}
    .horizontal-line {
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}
    {% comment %} More Category Styling {% endcomment %}
    .more-category-padding--{{ section.id }} {
    padding-top:{{section.settings.padding-top}}px;
    padding-bottom:{{section.settings.padding-bottom}}px;
}
    .morecategorycontainer{
    width:100%;
    max-width:88%;
    margin:0 auto;
}
    .newflex-more-cat.flex-more-cat {
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
}
    .linkmain-tiles div:empty,
    .newshopbycategory--{{section.id}} div:empty{
    display:block;
}
    .linkmain-tiles .vertical-line {
    width: .1px;
    background-color: black;
    height: 44px;
    align-self: center;
    margin-right: 4px;
}
    .linkmain-tiles .morecat-tiles .catTilesTxt.newcatTilesTxt {
    color: #000;
    font-size: 12px;
    text-transform: uppercase;
    font-family: Sequel Sans Medium Disp;
    letter-spacing: .2rem;
    margin-left: 21px;
}
    .linkmain-tiles.newlinkmain-tiles {
    all: unset;
    cursor: pointer;
    border: 1px solid;
    min-width: 11rem;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    border-radius: 2px;
    margin-right: 2rem;
    height: 43px;
    width: 100%;
    max-width: 29%;
    padding: 0 2rem 0 0.7em;
    margin-bottom: 2rem;
}
}
  @media screen and (min-width: 768px) and (max-width: 990px){
    .newshopbycategory--{{section.id}} {
    width: 100%;
    background: {{section.settings.shopbycategorybackg}};
}
    .newshopbycategoryRow {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: nowrap;
    margin-bottom: 0rem;
    gap:30px;
    box-sizing: border-box; 
    
}
    .newshopbycategory--{{section.id}} .newshopbycategoryRow.two-columns {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: nowrap;
    margin-bottom: 0rem;
    gap: 7rem;
    box-sizing: border-box;
}
    .newshopbycategory--{{section.id}} .newshopbycategoryRow.two-columns .categoryColumn {
    width: 50%; /* Adjust for 2 columns */
    padding-right: 7rem;
    }
    .newshopbycategoryRow .categoryColumn {
    width: 32%;
    position: relative;
    border-right: 1px solid {{section.settings.mainbordercolor}};
    padding-bottom: 5rem;
    padding-right: 3rem;
    padding-top: 5rem;
    }
    .newshopbycategory--{{section.id}} .newcategoryColumn .categoryImg {
    width: 100%;
}
    .newshopbycategory--{{section.id}} .categoryColumn:last-of-type {
    border-right: none;
}

    .newshopbycategory--{{section.id}} h2.headingtxt {
    font-size: 20px;
    line-height: 30px;
    text-align: center;
    font-weight: 400;
    margin-bottom: 0;
    {% for block in section.blocks %}
    color:{{block.settings.newheadingtxtcolr}};
    {% endfor %}
}
    .newshopbycategory--{{section.id}} p.descriptiontxt {
    margin-top: 0;
    text-align: center;
    {% for block in section.blocks %}
    color:{{block.settings.subheadingtxtcolr}};
    {% endfor %}
}
    .newshopbycategory--{{section.id}} .newBtnDiv .btnmain {
     {% for block in section.blocks %}
    color:{{block.settings.newbtncolr}};
    background-color: {{block.settings.newbtnbackg}};
    border: 1px solid {{block.settings.newbtnbordercolr}};
    {% endfor %}
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding:0 2rem;
    cursor: pointer;
    font-size: 1.4rem;
    text-decoration: none;
    letter-spacing: .18rem;
    line-height: 24px;
    border-radius: 2px;
    min-width: 110px;
    width: 100%;
    height: 35px;
    max-width: 18%;
    margin: 0 auto;
}
    .horizontal-line {
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}
    {% comment %} More Category Styling {% endcomment %}
    .more-category-padding--{{ section.id }} {
    padding-top:{{section.settings.padding-top}}px;
    padding-bottom:{{section.settings.padding-bottom}}px;
}
    .morecategorycontainer{
    width:100%;
    max-width:88%;
    margin:0 auto;
}
    .newflex-more-cat.flex-more-cat {
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
}
    .linkmain-tiles div:empty,
    .newshopbycategory--{{section.id}} div:empty{
    display:block;
}
    .linkmain-tiles .vertical-line {
    width: 1px;
    background-color: black;
    height: 44px;
    align-self: center;
    margin-right: 4px;
}
    .linkmain-tiles .morecat-tiles .catTilesTxt.newcatTilesTxt {
    color: #000;
    font-size: 12px;
    text-transform: uppercase;
    font-family: Sequel Sans Medium Disp;
    letter-spacing: .2rem;
    margin-left: 21px;
}
    .linkmain-tiles.newlinkmain-tiles {
    all: unset;
    cursor: pointer;
    border: 1px solid;
    min-width: 11rem;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    border-radius: 2px;
    margin-right: 2rem;
    height: 43px;
    /* width: 100%; */
    /* max-width: 29%; */
    padding: 0 2rem 0 0.7em;
    /* margin-bottom: 2rem; */
}
}
    @media screen and (max-width: 767px){
    .newshopbycategory--{{section.id}} {
    width: 100%;
    background: {{section.settings.shopbycategorybackg}};
}
    .newshopbycategoryRow.two-columns .categoryColumn:not(:last-child)::after {
    content: '';
    position: absolute;
    left: -11%;
    bottom: 0;
    width: 105vw;
    height: 1px;
    background-color: {{section.settings.mainbordercolor}}; 
}
    .newshopbycategory--{{section.id}} h2.headingtxt {
    font-size: 20px;
    line-height: 30px;
    text-align: center;
    font-weight: 400;
    margin-bottom: 0;
    {% for block in section.blocks %}
    color:{{block.settings.newheadingtxtcolr}};
    {% endfor %}
}
    .newshopbycategory--{{section.id}} p.descriptiontxt {
    margin-top: 0;
    text-align: center;
    {% for block in section.blocks %}
    color:{{block.settings.subheadingtxtcolr}};
    {% endfor %}
}

    .newshopbycategory--{{section.id}} .newBtnDiv .btnmain {
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 0 2rem;
    cursor: pointer;
    font-size: 1.4rem;
    text-decoration: none;
     {% for block in section.blocks %}
    color:{{block.settings.newbtncolr}};
    background-color: {{block.settings.newbtnbackg}};
    border: 1px solid {{block.settings.newbtnbordercolr}};
    {% endfor %}
    letter-spacing: .18rem;
    line-height: 24px;
    border-radius: 2px;
    min-width: 110px;
    width: 100%;
    height: 35px;
    max-width: 18%;
    margin: 0 auto;
}
    .newcategoryColumn{
    padding-top: 3rem;
    padding-bottom: 3rem;
    margin-bottom:0;
}
    .shopbycategoryContainer {
    width: 90%;
}
    .horizontal-line {
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}
    {% comment %} More Category Styling {% endcomment %}
    .more-category-padding--{{ section.id }} {
    padding-top:{{section.settings.mobile-padding-top}}px;
    padding-bottom:{{section.settings.mobile-padding-bottom}}px;
}
    .morecategorycontainer{
    width:100%;
    max-width:88%;
    margin:0 auto;
}
    .linkmain-tiles div:empty,
    .newshopbycategory--{{section.id}} div:empty{
    display:block;
}
    .linkmain-tiles .vertical-line {
    width: 0.1px;
    background-color: black;
    height: 44px;
    align-self: center;
    margin-right: 4px;
}
    .linkmain-tiles .morecat-tiles .catTilesTxt.newcatTilesTxt {
    color: #000;
    font-size: 12px;
    text-transform: uppercase;
    font-family: Sequel Sans Medium Disp;
    letter-spacing: .2rem;
    margin-left: 21px;
    white-space: unset;
}
    .newlinkmain-tiles{
    justify-content: flex-start;
}
    .morecategorycontainer .linkmain-tiles {
    width: auto;
    height: 43px;
    padding: 0 1rem;
    min-width: 10rem;
    margin-bottom: 1.5rem;
    flex: 0 0 96%;
    margin-right: 0;
}
}
</style>
<div class="newshopbycategory--{{ section.id }}" id="shopbycategory">
  <div class="shopbycategoryContainer">
    <div class="headingSecCategory">
      <p class="categorySubtext subparaCstm">{{ section.settings.newsubtxt1 }}</p>
      <h2 class="categoryheading">{{ section.settings.newheading1 }}</h2>
    </div>
    <div class="newshopbycategoryRow {% if section.blocks.size == 2 %}two-columns{% endif %}">
      {% for block in section.blocks %}
        {% if block.type == 'image' %}
          
          <div class="categoryColumn newcategoryColumn">
            <a href="{{block.settings.newbtnLink}}">  
              <img class="categoryImg" src="{{block.settings.newimage1 | img_url: 'master'}}" loading="lazy" alt="edit" width="600" height="800"/>
            </a>
            <div class="newheadingtxtDiv">
              <h2 class="headingtxt">{{ block.settings.newheadingtxt }}</h2>
          </div>
            <div class="newdescriptiontxtDiv">
              <p class="descriptiontxt">{{ block.settings.newdescriptiontxt }}</p>
          </div>
          <div class="newBtnDiv">
            <a href="{{block.settings.newbtnLink}}" class="btnmain">{{ block.settings.newbtnTxt }}
            </a>
          </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
  <div class="horizontal-line"></div>
  {% if section.settings.morecategoryhide == true %}
  <div class="morecategorycontainer more-category-padding--{{ section.id }}">
    <div class="headingSecCategory">
      <p class="categorySubtext subparaCstm">{{ section.settings.newsubtxt2 }}</p>
      <h2 class="categoryheading">{{ section.settings.newheading2 }}</h2>
    </div>
    <div class="newflex-more-cat flex-more-cat ">
      {% if section.settings.newcatText1 != blank %}
        <a class="linkmain-tiles newlinkmain-tiles" href="{{section.settings.newcatLink1}}">
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="morecat-tiles">
            <p class="catTilesTxt newcatTilesTxt">{{ section.settings.newcatText1 }}</p>
          </div>
        </a>
      {% endif %}
      {% if section.settings.newcatText2 != blank %}
        <a class="linkmain-tiles newlinkmain-tiles" href="{{section.settings.newcatLink2}}">
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="morecat-tiles">
            <p class="catTilesTxt newcatTilesTxt">{{ section.settings.newcatText2 }}</p>
          </div>
        </a>
      {% endif %}
      {% if section.settings.newcatText3 != blank %}
        <a class="linkmain-tiles newlinkmain-tiles" href="{{section.settings.newcatLink3}}">
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="morecat-tiles">
            <p class="catTilesTxt newcatTilesTxt">{{ section.settings.newcatText3 }}</p>
          </div>
        </a>
      {% endif %}
      {% if section.settings.newcatText4 != blank %}
        <a class="linkmain-tiles newlinkmain-tiles" href="{{section.settings.newcatLink4}}">
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="morecat-tiles">
            <p class="catTilesTxt newcatTilesTxt">{{ section.settings.newcatText4 }}</p>
          </div>
        </a>
      {% endif %}
      {% if section.settings.newcatText5 != blank %}
        <a class="linkmain-tiles newlinkmain-tiles" href="{{section.settings.newcatLink5}}">
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="vertical-line"></div> <!-- Vertical line between items -->
          <div class="morecat-tiles">
            <p class="catTilesTxt newcatTilesTxt">{{ section.settings.newcatText5 }}</p>
          </div>
        </a>
      {% endif %}
    </div>
  </div>
    {% endif %}
    </div>

<script>
  function isInViewport(element) {
    const rect = element.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.left >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
        rect.right <= (window.innerWidth || document.documentElement.clientWidth)
    );
  }
  (function(){
    let ifInView = false;
    let element =  document.querySelector('#shopbycategory .headingSecCategory');
    let element1 =  document.querySelectorAll('#shopbycategory .categoryColumn')[0];
    let element2 =  document.querySelectorAll('#shopbycategory .categoryColumn')[1];
    let element3 =  document.querySelectorAll('#shopbycategory .categoryColumn')[2];
    
    document.addEventListener('scroll', () => {
      if (ifInView == false ){ //view event
        ifInView = isInViewport(element)
        if (ifInView){
          dataLayer.push({ ecommerce: null });
          window.dataLayer.push({
           event: 'view_promotion',
           ecommerce: {
             items: [{
               "promotion_id": "{{ section.id }}-1",
               "promotion_name" : "{{ section.blocks[0].settings.newbtnTxt }}"
             },
            {
               "promotion_id": "{{ section.id }}-2",
               "promotion_name" : "{{ section.blocks[1].settings.newbtnTxt }}"
             },
            {
               "promotion_id": "{{ section.id }}-3",
               "promotion_name" : "{{ section.blocks[2].settings.newbtnTxt }}"
             }]
           }
          });
        }
      }
    });

    //click events
    element1.addEventListener('click', () => {
      dataLayer.push({ ecommerce: null });
      window.dataLayer.push({
       event: 'select_promotion',
       ecommerce: {
       items: [{
         "promotion_id": "{{ section.id }}-1",
         "promotion_name" : "{{ section.blocks[0].settings.btnTxt }}"
       }]
       }
      });
      console.log('select_promotion')
    })
    element2.addEventListener('click', () => {
      dataLayer.push({ ecommerce: null });
      window.dataLayer.push({
       event: 'select_promotion',
       ecommerce: {
       items: [{
         "promotion_id": "{{ section.id }}-2",
         "promotion_name" : "{{ section.blocks[1].settings.btnTxt }}"
       }]
       }
      });
      console.log('select_promotion')
    })
    element3.addEventListener('click', () => {
      dataLayer.push({ ecommerce: null });
      window.dataLayer.push({
       event: 'select_promotion',
       ecommerce: {
       items: [{
         "promotion_id": "{{ section.id }}-3",
         "promotion_name" : "{{ section.blocks[2].settings.btnTxt }}"
       }]
       }
      });
      console.log('select_promotion')
    })
    
  })()
</script>

{% schema %}
  {
    "name": "New Shop By Category",
    "settings": [
      {
        "type": "color",
        "id": "shopbycategorybackg",
        "label": "Add Background"
      },{
        "type": "color",
        "id": "mainbordercolor",
        "label": "Add Border color"
      },{
        "type": "text",
        "id": "newsubtxt1",
        "default": "Discover Our Luxury Collections",
        "label": "Image Category Subtext"
      }, {
        "type": "text",
        "id": "newheading1",
        "default": "SHOP BY CATEGORY",
        "label": "Image Category Heading"
      },{
        "type": "header",
        "content": "More Category Checkbox",
        "info": "If You Want to hide this Section Just checkbox unchecked"
      },{
        "type": "checkbox",
        "id": "morecategoryhide",
        "default": true,
        "label": "Checkbox"
      },{
        "type": "text",
        "id": "newsubtxt2",
        "default": "Find find the right categories?",
        "label": "More Category Subtext"
      }, {
        "type": "text",
        "id": "newheading2",
        "default": "More categories",
        "label": "More Category Heading"
      },{
        "type": "text",
        "id": "newcatText1",
        "default": "Analog watches",
        "label": "More Category Tiles"
      }, {
        "type": "url",
        "id": "newcatLink1",
        "label": "More Category Tiles Link"
      },{
        "type": "text",
        "id": "newcatText2",
        "default": "Analog watches",
        "label": "More Category Tiles"
      }, {
        "type": "url",
        "id": "newcatLink2",
        "label": "More Category Tiles Link"
      },{
        "type": "text",
        "id": "newcatText3",
        "default": "Analog watches",
        "label": "More Category Tiles"
      }, {
        "type": "url",
        "id": "newcatLink3",
        "label": "More Category Tiles Link"
      },{
        "type": "text",
        "id": "newcatText4",
        "default": "Analog watches",
        "label": "More Category Tiles"
      }, {
        "type": "url",
        "id": "newcatLink4",
        "label": "More Category Tiles Link"
      },{
        "type": "text",
        "id": "newcatText5",
        "default": "Analog watches",
        "label": "More Category Tiles"
      }, {
        "type": "url",
        "id": "newcatLink5",
        "label": "More Category Tiles Link"
      },{
        "type": "header",
        "content": "More Category Section",
        "info":"Apply For this Section"
       },{
        "type": "header",
        "content": "Desktop Padding"
      },{
        "type": "range",
        "id": "padding-top",
        "min": 1,
        "max": 100,
        "step": 1,
        "label": "padding top",
        "unit": "px",
        "default": 50     
      },{
        "type": "range",
        "id": "padding-bottom",
        "min": 1,
        "max": 100,
        "step": 1,
        "label": "padding bottom",
        "unit": "px",
        "default": 50
      },{
        "type": "header",
        "content": "Mobile Padding"
      },{
        "type": "range",
        "id": "mobile-padding-top",
        "min": 1,
        "max": 100,
        "step": 1,
        "label": "padding top",
        "unit": "px",
        "default": 25
      },{
        "type": "range",
        "id": "mobile-padding-bottom",
        "min": 1,
        "max": 100,
        "step": 1,
        "label": "padding bottom",
        "unit": "px",
        "default": 25
      }
    ],
    "blocks": [
      {
        "type": "image",
        "name": "Add Image Section",
        "limit": 3,
        "settings": [
          {
            "type": "image_picker",
            "id": "newimage1",
            "label": "Category Image"
          }, {
            "type": "text",
            "id": "newheadingtxt",
            "label": "Heading Text"
          },{
            "type": "text",
            "id": "newdescriptiontxt",
            "label": "SubTitle Text"
          },{
            "type": "text",
            "id": "newbtnTxt",
            "default": "SHOP NOW",
            "label": "Button Text"
          }, {
            "type": "url",
            "id": "newbtnLink",
            "label": "Category LInk"
          },{
            "type": "header",
            "content": "Color"
          },{
            "type": "color",
            "id": "newheadingtxtcolr",
            "label": "Add Heading Color"
          },{
            "type": "color",
            "id": "subheadingtxtcolr",
            "label": "Add subHeading Color"
          },{
            "type": "color",
            "id": "newbtnbackg",
            "label": "Add Button Background Color"
          },{
            "type": "color",
            "id": "newbtncolr",
            "label": "Add Button Text Color"
          },{
            "type": "color",
            "id": "newbtnbordercolr",
            "label": "Add Button Border Color"
          },

        ]
      }
    ],
    "presets": [
      {
        "name": "New-Edit-Shop-By-Ctegory",
        "category": "Theme"
      }
    ]
  }
{% endschema %}
